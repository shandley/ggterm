<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <!-- Background -->
  <rect width="900" height="700" fill="white"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="16" font-weight="bold" fill="#333">Figure 3: Iris Dataset Analysis Progression</text>

  <!-- Panel A: Initial scatter -->
  <rect x="30" y="50" width="400" height="280" rx="8" fill="#fafafa" stroke="#ddd" stroke-width="1"/>
  <text x="230" y="75" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">A) Initial Scatter Plot</text>

  <!-- Axis lines -->
  <line x1="80" y1="290" x2="400" y2="290" stroke="#999" stroke-width="1"/>
  <line x1="80" y1="100" x2="80" y2="290" stroke="#999" stroke-width="1"/>

  <!-- Axis labels -->
  <text x="240" y="310" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="10" fill="#666">petal_length</text>
  <text x="45" y="195" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="10" fill="#666" transform="rotate(-90 45 195)">petal_width</text>

  <!-- Y axis ticks -->
  <text x="70" y="290" text-anchor="end" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#666">0</text>
  <text x="70" y="243" text-anchor="end" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#666">0.5</text>
  <text x="70" y="195" text-anchor="end" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#666">1.0</text>
  <text x="70" y="148" text-anchor="end" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#666">1.5</text>
  <text x="70" y="100" text-anchor="end" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#666">2.5</text>

  <!-- X axis ticks -->
  <text x="100" y="305" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#666">1</text>
  <text x="180" y="305" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#666">3</text>
  <text x="260" y="305" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#666">5</text>
  <text x="340" y="305" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#666">7</text>

  <!-- Setosa points (small petals, bottom left) -->
  <circle cx="100" cy="270" r="3" fill="#1976d2"/>
  <circle cx="105" cy="268" r="3" fill="#1976d2"/>
  <circle cx="110" cy="272" r="3" fill="#1976d2"/>
  <circle cx="108" cy="265" r="3" fill="#1976d2"/>
  <circle cx="115" cy="270" r="3" fill="#1976d2"/>
  <circle cx="103" cy="275" r="3" fill="#1976d2"/>
  <circle cx="112" cy="268" r="3" fill="#1976d2"/>
  <circle cx="118" cy="273" r="3" fill="#1976d2"/>
  <circle cx="106" cy="278" r="3" fill="#1976d2"/>
  <circle cx="120" cy="270" r="3" fill="#1976d2"/>
  <circle cx="95" cy="272" r="3" fill="#1976d2"/>
  <circle cx="125" cy="268" r="3" fill="#1976d2"/>

  <!-- Versicolor points (middle) -->
  <circle cx="200" cy="200" r="3" fill="#1976d2"/>
  <circle cx="210" cy="195" r="3" fill="#1976d2"/>
  <circle cx="195" cy="205" r="3" fill="#1976d2"/>
  <circle cx="220" cy="190" r="3" fill="#1976d2"/>
  <circle cx="205" cy="210" r="3" fill="#1976d2"/>
  <circle cx="215" cy="200" r="3" fill="#1976d2"/>
  <circle cx="225" cy="185" r="3" fill="#1976d2"/>
  <circle cx="190" cy="215" r="3" fill="#1976d2"/>
  <circle cx="230" cy="195" r="3" fill="#1976d2"/>
  <circle cx="185" cy="208" r="3" fill="#1976d2"/>
  <circle cx="240" cy="188" r="3" fill="#1976d2"/>
  <circle cx="235" cy="198" r="3" fill="#1976d2"/>

  <!-- Virginica points (large petals, top right) -->
  <circle cx="300" cy="130" r="3" fill="#1976d2"/>
  <circle cx="310" cy="125" r="3" fill="#1976d2"/>
  <circle cx="295" cy="135" r="3" fill="#1976d2"/>
  <circle cx="320" cy="120" r="3" fill="#1976d2"/>
  <circle cx="305" cy="140" r="3" fill="#1976d2"/>
  <circle cx="330" cy="115" r="3" fill="#1976d2"/>
  <circle cx="315" cy="132" r="3" fill="#1976d2"/>
  <circle cx="325" cy="128" r="3" fill="#1976d2"/>
  <circle cx="290" cy="145" r="3" fill="#1976d2"/>
  <circle cx="340" cy="118" r="3" fill="#1976d2"/>
  <circle cx="335" cy="125" r="3" fill="#1976d2"/>
  <circle cx="280" cy="150" r="3" fill="#1976d2"/>

  <!-- Panel B: Colored by species -->
  <rect x="470" y="50" width="400" height="280" rx="8" fill="#fafafa" stroke="#ddd" stroke-width="1"/>
  <text x="670" y="75" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">B) Colored by Species</text>

  <!-- Legend -->
  <circle cx="780" cy="95" r="4" fill="#1976d2"/>
  <text x="790" y="98" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#333">setosa</text>
  <circle cx="780" cy="110" r="4" fill="#ff9800"/>
  <text x="790" y="113" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#333">versicolor</text>
  <circle cx="780" cy="125" r="4" fill="#43a047"/>
  <text x="790" y="128" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="#333">virginica</text>

  <!-- Axis lines -->
  <line x1="520" y1="290" x2="840" y2="290" stroke="#999" stroke-width="1"/>
  <line x1="520" y1="100" x2="520" y2="290" stroke="#999" stroke-width="1"/>

  <!-- Threshold lines -->
  <line x1="560" y1="100" x2="560" y2="290" stroke="#e91e63" stroke-width="1" stroke-dasharray="4,2"/>
  <line x1="520" y1="255" x2="840" y2="255" stroke="#e91e63" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="565" y="295" font-family="Helvetica, Arial, sans-serif" font-size="8" fill="#e91e63">2.5</text>
  <text x="505" y="258" font-family="Helvetica, Arial, sans-serif" font-size="8" fill="#e91e63">0.75</text>

  <!-- Setosa points (blue) -->
  <circle cx="540" cy="270" r="3" fill="#1976d2"/>
  <circle cx="545" cy="268" r="3" fill="#1976d2"/>
  <circle cx="550" cy="272" r="3" fill="#1976d2"/>
  <circle cx="548" cy="265" r="3" fill="#1976d2"/>
  <circle cx="555" cy="270" r="3" fill="#1976d2"/>
  <circle cx="543" cy="275" r="3" fill="#1976d2"/>
  <circle cx="552" cy="268" r="3" fill="#1976d2"/>
  <circle cx="535" cy="272" r="3" fill="#1976d2"/>
  <circle cx="546" cy="278" r="3" fill="#1976d2"/>
  <circle cx="538" cy="270" r="3" fill="#1976d2"/>

  <!-- Versicolor points (orange) -->
  <circle cx="640" cy="200" r="3" fill="#ff9800"/>
  <circle cx="650" cy="195" r="3" fill="#ff9800"/>
  <circle cx="635" cy="205" r="3" fill="#ff9800"/>
  <circle cx="660" cy="190" r="3" fill="#ff9800"/>
  <circle cx="645" cy="210" r="3" fill="#ff9800"/>
  <circle cx="655" cy="200" r="3" fill="#ff9800"/>
  <circle cx="665" cy="185" r="3" fill="#ff9800"/>
  <circle cx="630" cy="215" r="3" fill="#ff9800"/>
  <circle cx="670" cy="195" r="3" fill="#ff9800"/>
  <circle cx="625" cy="208" r="3" fill="#ff9800"/>
  <circle cx="680" cy="188" r="3" fill="#ff9800"/>

  <!-- Virginica points (green) -->
  <circle cx="740" cy="130" r="3" fill="#43a047"/>
  <circle cx="750" cy="125" r="3" fill="#43a047"/>
  <circle cx="735" cy="135" r="3" fill="#43a047"/>
  <circle cx="760" cy="120" r="3" fill="#43a047"/>
  <circle cx="745" cy="140" r="3" fill="#43a047"/>
  <circle cx="770" cy="115" r="3" fill="#43a047"/>
  <circle cx="755" cy="132" r="3" fill="#43a047"/>
  <circle cx="765" cy="128" r="3" fill="#43a047"/>
  <circle cx="730" cy="145" r="3" fill="#43a047"/>
  <circle cx="780" cy="118" r="3" fill="#43a047"/>
  <circle cx="720" cy="150" r="3" fill="#43a047"/>

  <!-- Panel C: Faceted -->
  <rect x="30" y="360" width="840" height="150" rx="8" fill="#fafafa" stroke="#ddd" stroke-width="1"/>
  <text x="450" y="385" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">C) Faceted by Species</text>

  <!-- Facet 1: setosa -->
  <rect x="60" y="400" width="240" height="90" rx="4" fill="white" stroke="#ddd" stroke-width="1"/>
  <text x="180" y="418" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="10" font-weight="bold" fill="#1976d2">setosa</text>
  <line x1="80" y1="475" x2="280" y2="475" stroke="#ccc" stroke-width="1"/>
  <line x1="80" y1="430" x2="80" y2="475" stroke="#ccc" stroke-width="1"/>
  <circle cx="100" cy="460" r="2.5" fill="#1976d2"/>
  <circle cx="110" cy="455" r="2.5" fill="#1976d2"/>
  <circle cx="105" cy="465" r="2.5" fill="#1976d2"/>
  <circle cx="115" cy="458" r="2.5" fill="#1976d2"/>
  <circle cx="120" cy="462" r="2.5" fill="#1976d2"/>
  <circle cx="95" cy="468" r="2.5" fill="#1976d2"/>
  <circle cx="125" cy="456" r="2.5" fill="#1976d2"/>
  <circle cx="108" cy="470" r="2.5" fill="#1976d2"/>
  <circle cx="130" cy="460" r="2.5" fill="#1976d2"/>
  <circle cx="118" cy="467" r="2.5" fill="#1976d2"/>

  <!-- Facet 2: versicolor -->
  <rect x="330" y="400" width="240" height="90" rx="4" fill="white" stroke="#ddd" stroke-width="1"/>
  <text x="450" y="418" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="10" font-weight="bold" fill="#ff9800">versicolor</text>
  <line x1="350" y1="475" x2="550" y2="475" stroke="#ccc" stroke-width="1"/>
  <line x1="350" y1="430" x2="350" y2="475" stroke="#ccc" stroke-width="1"/>
  <circle cx="420" cy="450" r="2.5" fill="#ff9800"/>
  <circle cx="430" cy="445" r="2.5" fill="#ff9800"/>
  <circle cx="440" cy="455" r="2.5" fill="#ff9800"/>
  <circle cx="450" cy="448" r="2.5" fill="#ff9800"/>
  <circle cx="460" cy="442" r="2.5" fill="#ff9800"/>
  <circle cx="410" cy="458" r="2.5" fill="#ff9800"/>
  <circle cx="470" cy="450" r="2.5" fill="#ff9800"/>
  <circle cx="435" cy="460" r="2.5" fill="#ff9800"/>
  <circle cx="480" cy="445" r="2.5" fill="#ff9800"/>
  <circle cx="425" cy="465" r="2.5" fill="#ff9800"/>

  <!-- Facet 3: virginica -->
  <rect x="600" y="400" width="240" height="90" rx="4" fill="white" stroke="#ddd" stroke-width="1"/>
  <text x="720" y="418" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="10" font-weight="bold" fill="#43a047">virginica</text>
  <line x1="620" y1="475" x2="820" y2="475" stroke="#ccc" stroke-width="1"/>
  <line x1="620" y1="430" x2="620" y2="475" stroke="#ccc" stroke-width="1"/>
  <circle cx="720" cy="440" r="2.5" fill="#43a047"/>
  <circle cx="730" cy="435" r="2.5" fill="#43a047"/>
  <circle cx="740" cy="445" r="2.5" fill="#43a047"/>
  <circle cx="750" cy="438" r="2.5" fill="#43a047"/>
  <circle cx="760" cy="432" r="2.5" fill="#43a047"/>
  <circle cx="710" cy="448" r="2.5" fill="#43a047"/>
  <circle cx="770" cy="440" r="2.5" fill="#43a047"/>
  <circle cx="735" cy="450" r="2.5" fill="#43a047"/>
  <circle cx="780" cy="435" r="2.5" fill="#43a047"/>
  <circle cx="700" cy="455" r="2.5" fill="#43a047"/>
  <circle cx="725" cy="458" r="2.5" fill="#43a047"/>

  <!-- Panel D: Export -->
  <rect x="30" y="530" width="840" height="150" rx="8" fill="#fafafa" stroke="#ddd" stroke-width="1"/>
  <text x="450" y="555" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">D) HTML Export with Vega-Lite</text>

  <!-- Browser mockup -->
  <rect x="100" y="570" width="700" height="100" rx="4" fill="white" stroke="#999" stroke-width="1"/>
  <rect x="100" y="570" width="700" height="20" rx="4" fill="#f5f5f5" stroke="#999" stroke-width="1"/>
  <circle cx="115" cy="580" r="5" fill="#ff5f56"/>
  <circle cx="130" cy="580" r="5" fill="#ffbd2e"/>
  <circle cx="145" cy="580" r="5" fill="#27ca40"/>
  <text x="450" y="584" text-anchor="middle" font-family="Courier, monospace" font-size="9" fill="#666">iris-petal-morphology.html</text>

  <!-- Mini plot in browser -->
  <circle cx="250" cy="630" r="2" fill="#1976d2"/>
  <circle cx="255" cy="628" r="2" fill="#1976d2"/>
  <circle cx="260" cy="632" r="2" fill="#1976d2"/>
  <circle cx="350" cy="620" r="2" fill="#ff9800"/>
  <circle cx="355" cy="618" r="2" fill="#ff9800"/>
  <circle cx="360" cy="622" r="2" fill="#ff9800"/>
  <circle cx="450" cy="610" r="2" fill="#43a047"/>
  <circle cx="455" cy="608" r="2" fill="#43a047"/>
  <circle cx="460" cy="612" r="2" fill="#43a047"/>

  <!-- Export buttons -->
  <rect x="550" y="615" width="80" height="25" rx="4" fill="#1976d2"/>
  <text x="590" y="632" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="white">Download PNG</text>
  <rect x="640" y="615" width="80" height="25" rx="4" fill="#43a047"/>
  <text x="680" y="632" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="white">Download SVG</text>
  <rect x="730" y="615" width="60" height="25" rx="4" fill="#666"/>
  <text x="760" y="632" text-anchor="middle" font-family="Helvetica, Arial, sans-serif" font-size="9" fill="white">View Spec</text>
</svg>